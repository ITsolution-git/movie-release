<div id="page-header" fxLayout="row">
  <div id="header-left" fxFlex>
    <!-- Page Title -->
    <h1>Current Movie Releases</h1>

    <!-- Movies Directory Results Counter -->
    <div id="results-counter">Results:
      <span *ngIf="mainDirectoryCurrentIndex === mainDirectoryTotalPages">{{ mainDirectoryTotalResults }}</span>
      <span *ngIf="mainDirectoryCurrentIndex !== mainDirectoryTotalPages">{{ mainDirectoryCurrentIndex * 20 }}</span> / {{ mainDirectoryTotalResults }}
    </div>
  </div>
</div>

<!-- Main Directory -->
<div *ngIf="!loading" class="movies-directory-content">
  <div fxLayout="row" fxLayoutWrap="wrap" fxLayoutAlign="space-around stretch" class="movies-list">
    <mat-card *ngFor="let movie of mainDirectoryMovies; let i = index" class="movie-card">
      <div class="movie-data">
        <div class="release-date">
          <h3 class="year">Released Movie:
            <span class="release_date">{{ movie.release_date | date: 'yyyy-MM-dd' }}</span>
          </h3>
        </div>
      </div>
      <a [routerLink]="['/movies/' + this.as.urlOptimizeText(movie.title)]">
        <div class="movie-thumbnail">
          <img *ngIf="movie.poster_path; else defaultMovieImage" [src]="[TMDB_IMAGES_BASE_URL + IMG_185 + movie.poster_path]" [alt]="movie.title"
            class="movie-img">
          <ng-template #defaultMovieImage>
            <img src="assets/img/default-movie-poster.png" [alt]="movie.title" class="movie-img">
          </ng-template>
        </div>
        <div class="movie-info">
          <div class="movie-info-sub" fxLayout="row" fxLayoutAlign="space-evenly stretch">
            <span class="movie-rating">
              <mat-icon>star</mat-icon>{{ movie.vote_average / 2 }}</span>
            <div class="favorite">
              <button mat-icon-button (click)="toggleFavoriteMovie()" class="favorite" matTooltip="Add to Favorites!" [ngClass]="{'active': isFavorited === true}">
                <mat-icon class="mat-icon material-icons">favorite</mat-icon>
              </button>
            </div>
          </div>
          <h2>{{ movie.title }}</h2>
        </div>
      </a>
    </mat-card>
  </div>
</div>

<!-- Loader -->
<div fxLayout="row" fxLayoutAlign="center center" *ngIf="loading" class="loader">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>
<!-- More Loader -->
<div fxLayout="row" fxLayoutAlign="center center" *ngIf="loadingMore" class="loader">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>
<!-- Load More Button -->
<div id="load-more" *ngIf="!loading && mainDirectoryCurrentIndex !== mainDirectoryTotalPages">
  <button mat-raised-button color="primary" (click)="loadMoreResults(mainDirectoryCurrentIndex + 1)">LOAD MORE...</button>
</div>